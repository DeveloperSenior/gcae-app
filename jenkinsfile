pipeline{

    agent any
    
    tools {
       nodejs 'node_20'
    }

    environment{
        AWS_CREDENTIAL = credentials('aws-credential-dllo')
        AWS_REGION = 'us-east-1'
    }

    stages{
        stage('Checkout'){
            steps{
                //checkout scm
               git credentialsId: 'CredencialesGitHub',
               url: 'https://github.com/DeveloperSenior/gcae-app.git',
               branch: 'develop'
            }

        }

        stage('Install Dependencies'){
            steps{
                sh 'npm install'
            }

        }

        stage('Run Test'){
            steps{
                sh 'npm test'
                junit './reports/testreport.xml'
            }
        }
            
    }
    
    post{
        always{
            cleanWs()
        }
    }

}